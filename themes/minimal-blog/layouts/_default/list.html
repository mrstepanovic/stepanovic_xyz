{{ define "main" }}
<div class="home">
    {{ if .Content }}
        <div class="intro">
            {{ .Content }}
        </div>
    {{ end }}

    <!-- Tag Cloud for Posts List -->
{{ $allTags := slice }}
{{ range .Data.Pages }}
    {{ if .Params.tags }}
        {{ range .Params.tags }}
            {{ $allTags = $allTags | append . }}
        {{ end }}
    {{ end }}
{{ end }}
{{ $uniqueTags := $allTags | uniq | sort }}
{{ if $uniqueTags }}
    <div class="tags-container cloud-tags">
        {{ range $uniqueTags }}
            <span class="tag-pill clickable" data-tag="{{ . }}">{{ . }}</span>
        {{ end }}
    </div>
{{ end }}

{{ if .Data.Pages }}
    <ul class="post-list-minimal">
        {{ range .Data.Pages.ByDate.Reverse }}
            <li data-tags="{{ if .Params.tags }}{{ delimit .Params.tags "," }}{{ end }}">
                <a href="{{ .Permalink }}" class="post-row-link">
                    <span class="post-date">{{ .Date.Format "2006-01-02" }}</span>
                    <span>
                        <span class="post-title">{{ .Title }}</span>
                        {{ if .Params.description }}
                            <span class="post-description">{{ .Params.description }}</span>
                        {{ else if .Summary }}
                            <span class="post-description">{{ truncate 100 .Summary }}</span>
                        {{ end }}
                    </span>
                </a>
            </li>
        {{ end }}
    </ul>
{{ end }}
</div>
{{ end }}